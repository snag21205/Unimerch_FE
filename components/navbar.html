<!-- Navbar Component -->
<nav class="navbar navbar-expand-lg navbar-custom fixed-top" 
     id="mainNav"
     role="navigation"
     aria-label="Main navigation">
    <div class="container">
        <!-- Brand -->
        <a class="navbar-brand" href="#">UNIMERCH</a>
        
        <!-- Toggle button for mobile -->
        <button class="navbar-toggler border-0" 
                type="button" 
                data-bs-toggle="collapse" 
                data-bs-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <!-- Navigation items -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#featured" aria-current="page">Trang chủ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pages/products/all-products.html">Tất cả sản phẩm</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#about">About</a>
                </li>
            </ul>
            
            <!-- Right side controls -->
            <div class="d-flex align-items-center gap-3">
                <!-- Search Button -->
                <button class="btn btn-link p-0 border-0" 
                        id="searchBtn" 
                        data-bs-toggle="modal" 
                        data-bs-target="#searchModal"
                        aria-label="Tìm kiếm sản phẩm">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" 
                         stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
                
                <!-- Cart Button -->
                <button class="btn btn-link p-0 border-0 position-relative" 
                        id="cartBtn" 
                        data-bs-toggle="offcanvas" 
                        data-bs-target="#cartOffcanvas"
                        aria-label="Giỏ hàng">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" 
                         stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="8" cy="21" r="1"></circle>
                        <circle cx="19" cy="21" r="1"></circle>
                        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L20.5 9H5.12"></path>
                    </svg>
                    <span class="badge bg-white text-dark rounded-pill position-absolute top-0 start-100 translate-middle d-none" 
                          id="cartCount" 
                          style="font-weight: 600;"
                          aria-live="polite"
                          aria-atomic="true">0</span>
                </button>
                
                <!-- Auth Section -->
                <div id="authSection">
                    <!-- Not logged in state -->
                    <div id="notLoggedIn" class="d-flex align-items-center gap-2">
                        <a href="pages/user/profile.html" 
                           class="btn btn-link p-0 border-0" 
                           title="Profile"
                           aria-label="Trang cá nhân">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" 
                                 stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                        </a>
                        <a href="pages/auth/login.html" 
                           class="btn btn-primary-custom btn-sm rounded-pill px-3" 
                           style="font-size: 14px; font-weight: 500;">
                            Đăng nhập
                        </a>
                    </div>
                    
                    <!-- Logged in state -->
                    <div id="loggedIn" class="d-none">
                        <div class="dropdown">
                            <button class="btn btn-link dropdown-toggle p-0 border-0 d-flex align-items-center gap-2" 
                                    type="button" 
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false"
                                    aria-haspopup="true"
                                    aria-label="Menu người dùng"
                                    style="color: var(--text-light);">
                                <div class="d-flex align-items-center justify-content-center rounded-circle" 
                                     style="width: 32px; height: 32px; background: var(--accent); color: white; font-size: 14px; font-weight: 600;" 
                                     id="userAvatar">
                                </div>
                                <span class="fw-medium d-none d-lg-inline" id="username" style="font-size: 14px;">User</span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end shadow" style="min-width: 200px;">
                                <li>
                                    <div class="dropdown-header">
                                        <div class="fw-semibold" style="font-size: 14px;" id="userFullName">Chào mừng trở lại!</div>
                                        <small class="text-muted" id="userEmail">user@ueh.edu.vn</small>
                                    </div>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <!-- Dashboard link (shown for admin/seller only) -->
                                <li id="dashboardMenuItem" class="d-none">
                                    <a class="dropdown-item d-flex align-items-center gap-2" 
                                       href="#" 
                                       id="dashboardLink" 
                                       style="padding: 0.5rem 1rem; font-size: 14px;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" 
                                             stroke="currentColor" stroke-width="2" aria-hidden="true">
                                            <rect x="3" y="3" width="7" height="7"></rect>
                                            <rect x="14" y="3" width="7" height="7"></rect>
                                            <rect x="14" y="14" width="7" height="7"></rect>
                                            <rect x="3" y="14" width="7" height="7"></rect>
                                        </svg>
                                        <span id="dashboardLinkText">Dashboard</span>
                                    </a>
                                </li>
                                <li id="dashboardDivider" class="d-none"><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center gap-2" 
                                       href="pages/user/profile.html" 
                                       style="padding: 0.5rem 1rem; font-size: 14px;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" 
                                             stroke="currentColor" stroke-width="2" aria-hidden="true">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        Hồ sơ của tôi
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center gap-2" 
                                       href="pages/user/orders.html" 
                                       style="padding: 0.5rem 1rem; font-size: 14px;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" 
                                             stroke="currentColor" stroke-width="2" aria-hidden="true">
                                            <circle cx="8" cy="21" r="1"></circle>
                                            <circle cx="19" cy="21" r="1"></circle>
                                            <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57L20.5 9H5.12"></path>
                                        </svg>
                                        Đơn hàng của tôi
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <button class="dropdown-item d-flex align-items-center gap-2 text-secondary" 
                                            onclick="logout()" 
                                            style="padding: 0.5rem 1rem; font-size: 14px; border: none; background: none; width: 100%; text-align: left;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" 
                                             stroke="currentColor" stroke-width="2" aria-hidden="true">
                                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                            <polyline points="16,17 21,12 16,7"></polyline>
                                            <line x1="21" y1="12" x2="9" y2="12"></line>
                                        </svg>
                                        Đăng xuất
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
